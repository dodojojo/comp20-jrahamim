<!DOCTYPE html>

<html>

<head>
<title>Friends of Ming Chow Jobs Listing</title>
<link rel="stylesheet" href="jobs.css" />
<script>

		
	function parse() {
		str = "";
		try{
			request = new XMLHttpRequest();
			request.open("get", "https://messagehub.herokuapp.com/lab8.json", true);
			request.send();
			request.onreadystatechange = function() {
				console.log(request.readystate);
				if(request.readystate == 4){
					try{
					 str = request.responseText;
					 console.log(str);
					}
					catch(error){
						alert("job listings failed to load");
					}
				}
			}
		}
		catch(error)
		{
			alert("cross platform sharing not allowed!");
		}
		

		//str = '[{"company":"Demiurge Studios","created_at":"2013-02-11T23 => 53 => 53Z","description":"Located steps from central sq, we are working on original and contract titles on everything from iOS to the Wii U. ","id":5,"location":"Cambridge, MA","position":"Game Dev Internship","posting_url":"http => //demiurgestudios.com/","requirements":"","responsibilities":"","updated_at":"2013-02-11T23 => 53 => 53Z"},{"company":"Apple, Inc.","created_at":"2013-02-11T23 => 51 => 19Z","description":"We are looking for CS candidates with a *nix background, familiarity with scripting languages and a strong propensity to learn, along with the standard CS background ( e.g. Data Structures & Algo, etc. ). ","id":4,"location":"Cupertino, CA","position":"Summer Internship","posting_url":"","requirements":"","responsibilities":"","updated_at":"2013-02-11T23 => 51 => 19Z"},{"company":"Cigital, Inc","created_at":"2013-02-12T00 => 02 => 47Z","description":"","id":10,"location":"Boston, MA","position":"Mobile Security Consultant","posting_url":"","requirements":"Solid iOS or Android experience.","responsibilities":"","updated_at":"2013-02-12T00 => 02 => 47Z"}]'
		JSONObj = eval( "(" + str + ")" );
		root = document.getElementById("list");
		
		for(i=0; i < JSONObj.length; i++)
		{
			list_root = document.createElement("ul");
			text_node1 = document.createTextNode("Company: " + JSONObj[i].company);
			list_node1 = document.createElement("li");
			list_node1.appendChild(text_node1);
			list_root.appendChild(list_node1);
						
			text_node2 = document.createTextNode("Location: " + JSONObj[i].location);
			list_node2 = document.createElement("li");
			list_node2.appendChild(text_node2);
			list_root.appendChild(list_node2);
			
			text_node3 = document.createTextNode("Position: " + JSONObj[i].position);
			list_node3 = document.createElement("li");
			list_node3.appendChild(text_node3);
			list_root.appendChild(list_node3);

			root.appendChild(list_root);
		}
    }
</script>
</head>

<body onload="parse()">
<div  id="list" ></div>
</body>

</html>
